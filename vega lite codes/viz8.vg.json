{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "hconcat": [
      {"title": "Number of Houses Sold in Greater Melbourne",
        "width": 350,
        "height": 250,
        "params": [
          {
            "name": "year_month_selection",
            "value": 2019,
            "bind":{
              "input": "select",
              "options": [2019, 2020],
              "labels": ["Pre-Covid (2019)", "Post-Covid (2020)"],
              "name": "Pre/Post Covid: "
            }
        },
        {
          "name": "zoom_level",
          "value": 20000,
          "bind":{
            "input": "range",
            "min": 20000,
            "max": 60000,
            "step": 100,
            "name": "Zoom: "
          }
        }
        ],
        "projection": {
          "type": "equirectangular", 
          "center": [145.11, -38],
          "scale":  {"expr": "zoom_level"}
        },
    
        "layer":[
            {
              "data": {
                "url": "https://raw.githubusercontent.com/EugeneFung/FIT3179-Data-Viz-Assignment2/main/js/newVicSuburbs%20.topojson.json",
                "format": {"type": "topojson", "feature": "newVicSuburbs"}
            },
              "transform": [
                {"calculate": "'Data is not available in ' + datum.properties.vic_loca_2", "as": "note"}
              ],
              "mark": {"type": "geoshape", "fill": "lightgray", "stroke": "white"},
              "encoding": {
                "tooltip": {
                  "field": "note"
                }
              }
            },
            {
              "data": {
                "url": "https://raw.githubusercontent.com/EugeneFung/FIT3179-Data-Viz-Assignment2/main/data/vic_suburb_year_sale_count.csv"
            },
              "transform": [{
                  "lookup": "SUBURB",
                  "from": {
                      "data": {
                          "url": "https://raw.githubusercontent.com/EugeneFung/FIT3179-Data-Viz-Assignment2/main/js/newVicSuburbs%20.topojson.json",
                          "format":{
                            "type": "topojson",
                            "feature": "newVicSuburbs"
                          }
                      },
                      "key": "properties.vic_loca_2"
                  },
                  "as": "geo"
              },
              {"filter": "datum.year == year_month_selection"}
              ],
              "mark": {"type": "geoshape", "stroke": "#fff", "strokeWidth": 0.5},
              "encoding": {
              "shape": {"field": "geo", "type": "geojson"},
                "color": {
                    "field": "n",
                    "type": "quantitative",
                    "title": "Properties sold",
                    "scale": {
                      "domain":[
                        1, 1000
                      ]
                    }
                },
              "tooltip": [
                  {"field": "SUBURB", "type": "nominal", "title": "Suburb"},
                  {"field": "n", "type": "quantitative", "title":"No. of Houses sold"}
                  ]
              }
              
            }
          ],
          "config": {}},
      {
        "data": {"url": "https://raw.githubusercontent.com/EugeneFung/FIT3179-Data-Viz-Assignment2/main/data/df_vic_property_count_price.csv"},
        "vconcat": [{
            "width": 480,
            "title":"Number of properties sold",
            "mark": "area",
            "encoding": {
            "x": {
                "field": "Month_Yr",
                "type": "ordinal"
            },
            "y": {"field": "n","type": "quantitative"},
            "color": {
            "field": "property_type"
            }
            }
        }, {
            "width": 480,
            "height": 260,
            "title": "Mean price",
            "mark": {
                "type": "line",
                "point": true
            },
            "encoding": {
                "x": {
                    "field": "Month_Yr",
                    "type": "ordinal"
                },
                "y": {"field": "price_mean", "type": "quantitative", "scale": {"domain": [400000, 1100000]}},
                "color": {"field": "property_type", "type": "nominal"}
              }
        }]}
    ]
    
  }